image: rust:latest
services:
- postgres:latest
stages:
- test
variables:
  COMPONENTS: "bin"

before_script:
- ./support/ci/fast_pass.sh || exit 0
- ./support/ci/compile_libsodium.sh
- ./support/ci/install_rustfmt.sh
test_with_lab:
  stage: test
  script: 
  - ./support/ci/rust_tests.sh
  - ./support/ci/lint.sh
  - cargo test
 